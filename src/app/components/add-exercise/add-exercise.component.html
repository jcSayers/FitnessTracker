<div class="add-exercise-container">
  <div class="header">
    <button (click)="onCancel()" class="btn btn-secondary">
      Cancel
    </button>
    <h1>{{ isEditMode ? 'Edit Exercise' : 'Create Exercise' }}</h1>
    <button
      (click)="onSave()"
      [disabled]="exerciseForm.invalid"
      class="btn btn-primary">
      Done
    </button>
  </div>

  <form [formGroup]="exerciseForm" class="exercise-form">
    <!-- Exercise Name -->
    <div class="form-group">
      <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Exercise Name</label>
      <input
        type="text"
        formControlName="name"
        [placeholder]="getPlaceholder(exerciseForm.get('category')?.value)"
        autocomplete="off"
        class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white">
      @if (isFieldInvalid('name')) {
        <p class="mt-1 text-sm text-red-600 dark:text-red-400">{{ getFieldError('name') }}</p>
      }
    </div>

    <!-- Category -->
    <div class="form-section">
      <label class="section-label">Type</label>
      <select
        formControlName="category"
        class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white">
        @for (category of exerciseCategories; track category) {
          <option [value]="category">
            {{ category | titlecase }}
          </option>
        }
      </select>
    </div>

    <!-- Sets and Reps -->
    <div class="form-section">
      <label class="section-label">Sets & Reps</label>
      <div class="form-row">
        <div class="form-group">
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Sets</label>
          <input
            type="number"
            formControlName="sets"
            min="1"
            max="20"
            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white">
          @if (isFieldInvalid('sets')) {
            <p class="mt-1 text-sm text-red-600 dark:text-red-400">{{ getFieldError('sets') }}</p>
          }
        </div>

        <div class="form-group">
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Reps (optional)</label>
          <input
            type="number"
            formControlName="reps"
            min="1"
            max="100"
            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white">
          @if (isFieldInvalid('reps')) {
            <p class="mt-1 text-sm text-red-600 dark:text-red-400">{{ getFieldError('reps') }}</p>
          }
        </div>
      </div>
    </div>

    <!-- Weight and Duration -->
    <div class="form-section">
      <label class="section-label">Load & Duration</label>
      <div class="form-row">
        <div class="form-group">
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Weight (optional)</label>
          <div class="relative">
            <input
              type="number"
              formControlName="weight"
              min="0"
              max="1000"
              class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white pr-12">
            <span class="absolute right-3 top-2.5 text-gray-500 dark:text-gray-400 text-sm">lbs</span>
          </div>
          @if (isFieldInvalid('weight')) {
            <p class="mt-1 text-sm text-red-600 dark:text-red-400">{{ getFieldError('weight') }}</p>
          }
        </div>

        <div class="form-group">
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Duration (optional)</label>
          <div class="relative">
            <input
              type="number"
              formControlName="duration"
              min="1"
              max="3600"
              class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white pr-12">
            <span class="absolute right-3 top-2.5 text-gray-500 dark:text-gray-400 text-sm">sec</span>
          </div>
          @if (isFieldInvalid('duration')) {
            <p class="mt-1 text-sm text-red-600 dark:text-red-400">{{ getFieldError('duration') }}</p>
          }
        </div>
      </div>
    </div>

    <!-- Rest Time -->
    <div class="form-section">
      <label class="section-label">Rest Between Sets</label>
      <div class="form-group">
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Rest Time</label>
        <div class="relative">
          <input
            type="number"
            formControlName="restTime"
            min="0"
            max="600"
            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white pr-20">
          <span class="absolute right-3 top-2.5 text-gray-500 dark:text-gray-400 text-sm">seconds</span>
        </div>
        @if (isFieldInvalid('restTime')) {
          <p class="mt-1 text-sm text-red-600 dark:text-red-400">{{ getFieldError('restTime') }}</p>
        }
      </div>
    </div>

    <!-- Notes -->
    <div class="form-section">
      <label class="section-label">Notes (Optional)</label>
      <div class="form-group">
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Notes</label>
        <textarea
          formControlName="notes"
          rows="3"
          placeholder="Form cues, modifications, etc."
          autocomplete="off"
          class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white resize-none">
        </textarea>
      </div>
    </div>
  </form>
</div>
