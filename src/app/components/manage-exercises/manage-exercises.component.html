<div class="manage-exercises-container">
  <div class="header">
    <button (click)="onBack()" class="btn btn-icon back-button" title="Go back">
      <app-svg-icon name="arrow_back" size="lg"></app-svg-icon>
    </button>
    <div class="header-content">
      <h1>{{ workoutData().name }}</h1>
      @if (workoutData().description) {
        <p class="subtitle">{{ workoutData().description }}</p>
      }
    </div>
  </div>

  <div class="exercises-section">
    <div class="section-header">
      <h2>Exercises ({{ workoutData().exercises.length }})</h2>
      <button
        (click)="onAddExercise()"
        class="btn btn-primary">
        <app-svg-icon name="add" size="md"></app-svg-icon>
        Add Exercise
      </button>
    </div>

    @if (workoutData().exercises.length > 0) {
      <div class="exercises-list">
        @for (exercise of workoutData().exercises; track exercise.id; let i = $index) {
          <div class="exercise-card card">
            <div class="exercise-content">
              <div class="exercise-number">{{ i + 1 }}</div>
              <div class="exercise-info">
                <h3>{{ exercise.name }}</h3>
                <p class="exercise-details">{{ getExerciseDescription(exercise) }}</p>
                @if (exercise.notes) {
                  <p class="exercise-notes">
                    <app-svg-icon name="note" size="sm"></app-svg-icon>
                    {{ exercise.notes }}
                  </p>
                }
              </div>
              <div class="exercise-actions">
                <button
                  class="btn btn-icon"
                  [disabled]="i === 0"
                  (click)="onMoveUp(i)"
                  title="Move up">
                  <app-svg-icon name="arrow_upward" size="md"></app-svg-icon>
                </button>
                <button
                  class="btn btn-icon"
                  [disabled]="i === workoutData().exercises.length - 1"
                  (click)="onMoveDown(i)"
                  title="Move down">
                  <app-svg-icon name="arrow_downward" size="md"></app-svg-icon>
                </button>
                <button
                  class="btn btn-icon"
                  (click)="onEditExercise(i)"
                  title="Edit">
                  <app-svg-icon name="edit" size="md"></app-svg-icon>
                </button>
                <button
                  class="btn btn-icon"
                  (click)="onDeleteExercise(i)"
                  title="Delete">
                  <app-svg-icon name="delete" size="md"></app-svg-icon>
                </button>
              </div>
            </div>
          </div>
        }
      </div>
    } @else {
      <div class="empty-state">
        <div class="empty-icon">
          <app-svg-icon name="fitness_center" size="xl"></app-svg-icon>
        </div>
        <h3>No exercises yet</h3>
        <p>Add exercises to build your workout</p>
        <button
          (click)="onAddExercise()"
          class="btn btn-primary">
          <app-svg-icon name="add" size="md"></app-svg-icon>
          Add First Exercise
        </button>
      </div>
    }
  </div>

  <div class="bottom-actions">
    <button
      (click)="onBack()"
      class="btn btn-secondary">
      Back
    </button>
    <button
      [disabled]="workoutData().exercises.length === 0 || isSaving()"
      (click)="onSaveWorkout()"
      class="btn btn-primary">
      @if (isSaving()) {
        <app-svg-icon name="refresh" size="md"></app-svg-icon>
        <span>Saving...</span>
      } @else {
        <app-svg-icon name="save" size="md"></app-svg-icon>
        <span>Save Workout</span>
      }
    </button>
  </div>
</div>
